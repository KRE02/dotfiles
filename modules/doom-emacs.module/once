#!/bin/env bash

bins=(
    emacs
    fd-find
    ripgrep
    tidy
    editorconfig
    pipenv
    npm
    gnuplot
    lua
    lua-devel
    luarocks
    # dict
    hunspell
    aspell
    aspell-en
    aspell-de
    # mail
    msmtp
    isync
    # lsp
    #ccls # ERROR
    # fonts
    'mozilla-fira-*'
    'roboto-fontface-*'
    'google-roboto-*'
)

pkg-install "${bins[@]}"

pippkg=(
    cmake-language-server
    isort
    pytest
)

pip install --user "${pippkg[@]}"

npmpkg=(
    stylelint
    stylelint-config-standard
    js-beautify
)

npm --prefix="$HOME/.npm" install -g "${npmpkg[@]}"

luapkg=(
    luacheck
)

luarocks install --local "${luapkg[@]}"

if [[ ! -d "${HOME}/.emacs.d" ]]; then
    step 'cloning doom to ~/.emacs.d'
    git clone https://github.com/hlissner/doom-emacs ~/.emacs.d >/dev/null

    step 'installing doom emacs'
    ~/.emacs.d/bin/doom install

    touch ~/.emacs.d/.nobackup
else
    step 'syncing doom emacs'
    ~/.emacs.d/bin/doom sync
fi
